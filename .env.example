# =============================================================================
# CoreVisitor - Configurazione Centralizzata Monorepo
# =============================================================================
# Questo file contiene TUTTE le variabili d'ambiente per:
# - Backend (NestJS)
# - Frontend (Next.js)
# - Docker Compose
# - Servizi esterni (MySQL, MinIO, Meilisearch)
#
# Copia questo file come .env e configura i valori:
#   cp .env.example .env
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------
NODE_ENV=development
APP_NAME=CoreVisitor
APP_PORT=3006
APP_URL=http://localhost:83

# -----------------------------------------------------------------------------
# DATABASE (MySQL condiviso con CoreServices)
# -----------------------------------------------------------------------------
# Credenziali per accedere al database MySQL condiviso
# IMPORTANTE: In produzione cambia queste credenziali!

MYSQL_ROOT_PASSWORD=rootpassword
MYSQL_DATABASE=corevisitor
MYSQL_USER=root
MYSQL_PASSWORD=rootpassword
MYSQL_HOST=localhost
MYSQL_PORT=3306

# DATABASE_URL viene costruito automaticamente usando le variabili sopra
# Formato: mysql://USER:PASSWORD@HOST:PORT/DATABASE
# Per sviluppo locale: localhost
# Per Docker: core-mysql (nome del container, sovrascritto in docker-compose.yml)
DATABASE_URL=mysql://${MYSQL_USER}:${MYSQL_PASSWORD}@${MYSQL_HOST}:${MYSQL_PORT}/${MYSQL_DATABASE}

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
JWT_SECRET=corevisitor-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# MinIO (S3-compatible Object Storage)
# -----------------------------------------------------------------------------
# Storage per documenti identità scansionati
# Per sviluppo locale: localhost
# Per Docker: core-minio (nome del container, sovrascritto in docker-compose.yml)

MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_BUCKET_NAME=corevisitor-files

# -----------------------------------------------------------------------------
# Meilisearch (Full-Text Search Engine)
# -----------------------------------------------------------------------------
# Motore di ricerca per indicizzare visitatori e visite
# Per sviluppo locale: http://localhost:7700
# Per Docker: http://core-meilisearch:7700 (sovrascritto in docker-compose.yml)

MEILISEARCH_HOST=http://localhost:7700
MEILISEARCH_API_KEY=masterKeyChangeThis
MEILI_MASTER_KEY=masterKeyChangeThis
MEILI_ENV=production

# -----------------------------------------------------------------------------
# Frontend (Next.js)
# -----------------------------------------------------------------------------
# IMPORTANTE: Usa /api per produzione con nginx reverse proxy
# Per sviluppo locale senza nginx: http://localhost:3006/api
NEXT_PUBLIC_API_URL=/api

# -----------------------------------------------------------------------------
# CORS Origins
# -----------------------------------------------------------------------------
CORS_ORIGIN=http://localhost:3000,http://localhost:83,http://localhost:3005

# -----------------------------------------------------------------------------
# File Upload
# -----------------------------------------------------------------------------
MAX_FILE_SIZE=5242880

# -----------------------------------------------------------------------------
# Badge/QR Code
# -----------------------------------------------------------------------------
QR_CODE_EXPIRY_HOURS=24
BADGE_TEMPLATE_PATH=./templates/badge.html

# -----------------------------------------------------------------------------
# Notifications (Opzionale - disabilitato di default)
# -----------------------------------------------------------------------------
NOTIFICATIONS_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@corevisitor.com

# -----------------------------------------------------------------------------
# Visitor Management
# -----------------------------------------------------------------------------
# Durata predefinita visita in ore
DEFAULT_VISIT_DURATION_HOURS=8
# Giorni di retention storico visite (per GDPR)
VISIT_HISTORY_RETENTION_DAYS=365
# Auto check-out dopo N ore di inattività
AUTO_CHECKOUT_HOURS=12

# -----------------------------------------------------------------------------
# Timezone
# -----------------------------------------------------------------------------
TZ=Europe/Rome

# -----------------------------------------------------------------------------
# DOCKER (solo per produzione con docker-compose)
# -----------------------------------------------------------------------------
# Queste variabili vengono sovrascrivere automaticamente nel docker-compose.yml
# In Docker i nomi host cambiano: localhost -> core-mysql, core-minio, core-meilisearch
